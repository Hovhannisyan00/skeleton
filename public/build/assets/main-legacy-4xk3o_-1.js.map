{"version":3,"file":"main-legacy-4xk3o_-1.js","sources":["../../../resources/js/common/main.js"],"sourcesContent":["$(function () {\n  select2Init();\n\n  datepickerInit();\n\n  datetimePickerInit();\n\n  ckEditorInit();\n\n  openMenu();\n\n  copyMlInfo();\n\n  responseMessage();\n\n  minimizeMenu();\n});\nwindow.showSuccessMessage = function (message) {\n  $.toast({\n    text: message,\n    hideAfter: 2000,\n    position: 'top-right',\n    stack: false,\n    loader: false,\n    icon: 'success',\n    allowToastClose: false,\n  });\n};\n\nwindow.showErrorMessage = function (message) {\n  $.toast({\n    heading: 'Error',\n    hideAfter: 2000,\n    text: message,\n    position: 'top-right',\n    stack: false,\n    loader: false,\n    icon: 'error',\n    allowToastClose: false,\n  });\n};\n// function showSuccessMessage(message) {\n//   $.toast({\n//     text: message,\n//     hideAfter: 2000,\n//     position: 'top-right',\n//     stack: false,\n//     loader: false,\n//     icon: 'success',\n//     allowToastClose: false,\n//   });\n//\n// };\n// function showErrorMessage(message) {\n//   $.toast({\n//     heading: 'Error',\n//     hideAfter: 2000,\n//     text: message,\n//     position: 'top-right',\n//     stack: false,\n//     loader: false,\n//     icon: 'error',\n//     allowToastClose: false,\n//   });\n//\n// };\nfunction select2Init (div = undefined, className = 'select2') {\n   let select2 = $(`select.${className}`);\n   if (typeof div !== 'undefined') {\n    select2 = div.find(`select.${className}`);\n\n  }\n   $.each(select2, function () {\n    $(this).select2({\n      placeholder: $trans('__dashboard.select.option.default'),\n      minimumResultsForSearch: 10,\n      tags: $(this).data('allow-tags') || false,\n      allowClear: $(this).data('allow-clear') || false,\n    });\n  });\n\n};\nfunction select2Reset(select) {\n   if (select.length) {\n    select.select2('val', '');\n    select.find('option').not(':first-child').remove();\n  }\n\n};\nfunction select2SetValues (select, data) {\n   $.each(data, (key, value) => {\n    select.append(new Option(value, key, false, false)).trigger('change.select2');\n  });\n\n};\nfunction disableField(field, disable) {\n   if (typeof disable === 'undefined') {\n    disable = true;\n\n  }\n   field.prop('disabled', disable);\n\n};\nfunction loadContent (content, removeLoad) {\n   if (typeof removeLoad === 'undefined') {\n    content.addClass('loading-content position-relative');\n  } else {\n    content.removeClass('loading-content position-relative');\n  }\n\n};\n\nfunction minimizeMenu() {\n  $('.brand-toggle').click(() => {\n    $('.page').toggleClass('minimaize-menu');\n  });\n  $('.open-menu').click(() => {\n    $('.page').toggleClass('left-menu-opened');\n    $('.open-menu').toggleClass('open-menu-opened');\n  });\n}\n// ClassicEditor\n\nfunction ckEditorInit() {\n  const ckeditorEls = document.querySelectorAll('.ckeditor5');\n\n  ckeditorEls.forEach((item) => {\n    ClassicEditor.create(item, {\n      cloudServices: {\n        tokenUrl: 'https://33333.cke-cs.com/token/dev/ijrDsqFix838Gh3wGO3F77FSW94BwcLXprJ4APSp3XQ26xsUHTi0jcb1hoBt',\n        uploadUrl: 'https://33333.cke-cs.com/easyimage/upload/',\n      },\n    })\n      .then((editor) => {\n        if ($(item).attr('disabled')) {\n          editor.isReadOnly = true;\n        }\n\n        editor.model.document.on('change:data', (evt, data) => {\n          editor.updateSourceElement();\n        });\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  });\n}\n\nfunction datepickerInit() {\n  const datepickerInputs = $('.datepicker');\n\n  if (datepickerInputs.length) {\n    $.each(datepickerInputs, function () {\n      const self = $(this);\n\n      self.datetimepicker({\n        timepicker: false,\n        format: 'd.m.Y',\n        scrollMonth: false,\n        scrollInput: false,\n        onChangeDateTime(dp, $input) {\n          let backendVal = '';\n          if ($input.val()) {\n            backendVal = moment($input.val(), 'DD.MM.YYYY').format($dashboardDates.js.date_format);\n          }\n          self.siblings('.backend-date-value').val(backendVal);\n        },\n      });\n    });\n  }\n}\n\nfunction datetimePickerInit() {\n  const datetimePickerInputs = $('.datetimepicker');\n\n  if (datetimePickerInputs.length) {\n    $.each(datetimePickerInputs, function () {\n      const self = $(this);\n\n      self.datetimepicker({\n        format: 'd.m.Y H:i',\n        onChangeDateTime(dp, $input) {\n          let backendVal = '';\n          if ($input.val()) {\n            backendVal = moment($input.val(), 'DD.MM.YYYY HH:mm').format($dashboardDates.js.date_time_format);\n          }\n          self.siblings('.backend-date-value').val(backendVal);\n        },\n      });\n    });\n  }\n}\n\nfunction openMenu() {\n  $('.open-menu').click(() => {\n    $('.page').toggleClass('left-menu-opened');\n    $('.open-menu').toggleClass('open-menu-opened');\n  });\n}\n\nfunction copyMlInfo() {\n  const copyMlButton = $('.copy-ml-info-btn');\n\n  if (copyMlButton.length) {\n    copyMlButton.click(function () {\n      const self = $(this);\n      const currentTabData = self.closest('.tab-pane').find(':input');\n      const toTabData = $(`#__mls__tab__${self.data('to-lang-code')}`);\n\n      self.prop('disabled', true);\n\n      $.each(currentTabData, function () {\n        const inputName = $(this).attr('name');\n\n        if (inputName) {\n          const toInputName = inputName.replace(self.data('current-lang-code'), self.data('to-lang-code'));\n          const toInput = toTabData.find(`*[name=\"${toInputName}\"]`);\n\n          if (toInput.length) {\n            // @todo ckeditor set val\n            if (toInput.hasClass('ckeditor5')) {\n              // toInput.ckeditor5().setData($(this).val());\n            } else {\n              toInput.val($(this).val());\n            }\n          }\n\n          setTimeout(() => {\n            self.prop('disabled', false);\n          }, 120);\n        }\n      });\n    });\n  }\n}\n\n\nfunction responseMessage() {\n  const responseMessageStorage = localStorage.getItem('_message');\n  if (responseMessageStorage) {\n    // eslint-disable-next-line no-undef\n    showSuccessMessage(responseMessageStorage);\n  }\n  localStorage.removeItem('_message');\n}\n"],"names":["$","div","className","select2","find","each","this","placeholder","$trans","minimumResultsForSearch","tags","data","allowClear","select2Init","datepickerInputs","length","self","datetimepicker","timepicker","format","scrollMonth","scrollInput","onChangeDateTime","dp","$input","backendVal","val","moment","$dashboardDates","js","date_format","siblings","datepickerInit","datetimePickerInputs","date_time_format","datetimePickerInit","document","querySelectorAll","forEach","item","ClassicEditor","create","cloudServices","tokenUrl","uploadUrl","then","editor","attr","isReadOnly","model","on","evt","updateSourceElement","catch","error","console","click","toggleClass","copyMlButton","currentTabData","closest","toTabData","prop","inputName","toInputName","replace","toInput","hasClass","setTimeout","copyMlInfo","responseMessageStorage","localStorage","getItem","showSuccessMessage","removeItem","responseMessage","window","message","toast","text","hideAfter","position","stack","loader","icon","allowToastClose","showErrorMessage","heading"],"mappings":"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"}