{"version":3,"file":"main-legacy-JMLVkl0Q.js","sources":["../../../resources/js/common/main.js"],"sourcesContent":["$(function () {\n  select2Init();\n\n  datepickerInit();\n\n  datetimePickerInit();\n\n  ckEditorInit();\n\n  openMenu();\n\n  copyMlInfo();\n\n  responseMessage();\n\n  minimizeMenu();\n});\n\nshowSuccessMessage = function (message) {\n  $.toast({\n    text: message,\n    hideAfter: 2000,\n    position: 'top-right',\n    stack: false,\n    loader: false,\n    icon: 'success',\n    allowToastClose: false,\n  });\n};\n\nshowErrorMessage = function (message) {\n  $.toast({\n    heading: 'Error',\n    hideAfter: 2000,\n    text: message,\n    position: 'top-right',\n    stack: false,\n    loader: false,\n    icon: 'error',\n    allowToastClose: false,\n  });\n};\n\nselect2Init = function (div = undefined, className = 'select2') {\n  let select2 = $(`select.${className}`);\n  if (typeof div !== 'undefined') {\n    select2 = div.find(`select.${className}`);\n  }\n\n  $.each(select2, function () {\n    $(this).select2({\n      placeholder: $trans('__dashboard.select.option.default'),\n      minimumResultsForSearch: 10,\n      tags: $(this).data('allow-tags') || false,\n      allowClear: $(this).data('allow-clear') || false,\n    });\n  });\n};\n\nselect2Reset = function (select) {\n  if (select.length) {\n    select.select2('val', '');\n    select.find('option').not(':first-child').remove();\n  }\n};\n\nselect2SetValues = function (select, data) {\n  $.each(data, (key, value) => {\n    select.append(new Option(value, key, false, false)).trigger('change.select2');\n  });\n};\n\ndisableField = function (field, disable) {\n  if (typeof disable === 'undefined') {\n    disable = true;\n  }\n\n  field.prop('disabled', disable);\n};\n\nloadContent = function (content, removeLoad) {\n  if (typeof removeLoad === 'undefined') {\n    content.addClass('loading-content position-relative');\n  } else {\n    content.removeClass('loading-content position-relative');\n  }\n};\n\nfunction minimizeMenu() {\n  $('.brand-toggle').click(() => {\n    $('.page').toggleClass('minimaize-menu');\n  });\n  $('.open-menu').click(() => {\n    $('.page').toggleClass('left-menu-opened');\n    $('.open-menu').toggleClass('open-menu-opened');\n  });\n}\n\n// ClassicEditor\nfunction ckEditorInit() {\n  const ckeditorEls = document.querySelectorAll('.ckeditor5');\n\n  ckeditorEls.forEach((item) => {\n    ClassicEditor.create(item, {\n      cloudServices: {\n        tokenUrl: 'https://33333.cke-cs.com/token/dev/ijrDsqFix838Gh3wGO3F77FSW94BwcLXprJ4APSp3XQ26xsUHTi0jcb1hoBt',\n        uploadUrl: 'https://33333.cke-cs.com/easyimage/upload/',\n      },\n    })\n      .then((editor) => {\n        if ($(item).attr('disabled')) {\n          editor.isReadOnly = true;\n        }\n\n        editor.model.document.on('change:data', (evt, data) => {\n          editor.updateSourceElement();\n        });\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  });\n}\n\nfunction datepickerInit() {\n  const datepickerInputs = $('.datepicker');\n\n  if (datepickerInputs.length) {\n    $.each(datepickerInputs, function () {\n      const self = $(this);\n\n      self.datetimepicker({\n        timepicker: false,\n        format: 'd.m.Y',\n        scrollMonth: false,\n        scrollInput: false,\n        onChangeDateTime(dp, $input) {\n          let backendVal = '';\n          if ($input.val()) {\n            backendVal = moment($input.val(), 'DD.MM.YYYY').format($dashboardDates.js.date_format);\n          }\n          self.siblings('.backend-date-value').val(backendVal);\n        },\n      });\n    });\n  }\n}\n\nfunction datetimePickerInit() {\n  const datetimePickerInputs = $('.datetimepicker');\n\n  if (datetimePickerInputs.length) {\n    $.each(datetimePickerInputs, function () {\n      const self = $(this);\n\n      self.datetimepicker({\n        format: 'd.m.Y H:i',\n        onChangeDateTime(dp, $input) {\n          let backendVal = '';\n          if ($input.val()) {\n            backendVal = moment($input.val(), 'DD.MM.YYYY HH:mm').format($dashboardDates.js.date_time_format);\n          }\n          self.siblings('.backend-date-value').val(backendVal);\n        },\n      });\n    });\n  }\n}\n\nfunction openMenu() {\n  $('.open-menu').click(() => {\n    $('.page').toggleClass('left-menu-opened');\n    $('.open-menu').toggleClass('open-menu-opened');\n  });\n}\n\nfunction copyMlInfo() {\n  const copyMlButton = $('.copy-ml-info-btn');\n\n  if (copyMlButton.length) {\n    copyMlButton.click(function () {\n      const self = $(this);\n      const currentTabData = self.closest('.tab-pane').find(':input');\n      const toTabData = $(`#__mls__tab__${self.data('to-lang-code')}`);\n\n      self.prop('disabled', true);\n\n      $.each(currentTabData, function () {\n        const inputName = $(this).attr('name');\n\n        if (inputName) {\n          const toInputName = inputName.replace(self.data('current-lang-code'), self.data('to-lang-code'));\n          const toInput = toTabData.find(`*[name=\"${toInputName}\"]`);\n\n          if (toInput.length) {\n            // @todo ckeditor set val\n            if (toInput.hasClass('ckeditor5')) {\n              // toInput.ckeditor5().setData($(this).val());\n            } else {\n              toInput.val($(this).val());\n            }\n          }\n\n          setTimeout(() => {\n            self.prop('disabled', false);\n          }, 120);\n        }\n      });\n    });\n  }\n}\n\nfunction responseMessage() {\n  const responseMessageStorage = localStorage.getItem('_message');\n  if (responseMessageStorage) {\n    // eslint-disable-next-line no-undef\n    showSuccessMessage(responseMessageStorage);\n  }\n  localStorage.removeItem('_message');\n}\n"],"names":["$","select2Init","datepickerInputs","length","each","self","this","datetimepicker","timepicker","format","scrollMonth","scrollInput","onChangeDateTime","dp","$input","backendVal","val","moment","$dashboardDates","js","date_format","siblings","datepickerInit","datetimePickerInputs","date_time_format","datetimePickerInit","document","querySelectorAll","forEach","item","ClassicEditor","create","cloudServices","tokenUrl","uploadUrl","then","editor","attr","isReadOnly","model","on","evt","data","updateSourceElement","catch","error","console","click","toggleClass","copyMlButton","currentTabData","closest","find","toTabData","prop","inputName","toInputName","replace","toInput","hasClass","setTimeout","copyMlInfo","responseMessageStorage","localStorage","getItem","showSuccessMessage","removeItem","responseMessage","message","toast","text","hideAfter","position","stack","loader","icon","allowToastClose","showErrorMessage","heading","div","undefined","className","select2","placeholder","$trans","minimumResultsForSearch","tags","allowClear","select2Reset","select","not","remove","select2SetValues","key","value","append","Option","trigger","disableField","field","disable","loadContent","content","removeLoad","addClass","removeClass"],"mappings":"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"}