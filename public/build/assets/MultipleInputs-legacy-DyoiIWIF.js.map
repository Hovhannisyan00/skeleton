{"version":3,"file":"MultipleInputs-legacy-DyoiIWIF.js","sources":["../../../resources/js/core/MultipleInputs.js"],"sourcesContent":["class MultipleInputs {\n  constructor() {\n    this.coreParentClass = 'core-multiple-inputs';\n  }\n\n  _addMultipleItem() {\n    const $this = this;\n    $('.core-multiple-button').click(function () {\n      const parentGroupDiv = $(this).closest(`.${$this.coreParentClass}`);\n\n      if (parentGroupDiv.find('select.select2').length) {\n        parentGroupDiv.find('select.select2').select2('destroy');\n      }\n\n      const clonedGroup = parentGroupDiv.find('.group-item:first').clone();\n      const clonedGroupInputLength = clonedGroup.find('input').length;\n      const groupItemsLength = parentGroupDiv.find('.group-item').length;\n\n      if (clonedGroupInputLength) {\n        $.each(clonedGroup.find(':input').not(\"input[type='hidden']\").not('button'), (k, input) => {\n          const formGroup = $(input).closest('.form-group');\n          const errorSpan = formGroup.find('.validation-error');\n\n          if ($(input).attr('type') === 'file') {\n            const fileId = $(input).attr('id');\n\n            const replacedName = $(input).attr('data-name').replace('0', groupItemsLength);\n            $(input).val('').attr('data-name', replacedName);\n            const replacedId = fileId.replace('0', groupItemsLength);\n            $(input).attr('id', replacedId);\n\n            const labels = clonedGroup.find(`[for=\"${fileId}\"]`);\n            $(input).closest('.__uploaded__files').remove();\n\n            if (labels.length) {\n              const label = labels[0];\n              const labelReplacedFor = $(label).attr('for').replace('0', groupItemsLength);\n              const labelReplacedDataInput = $(label).attr('data-input').replace('0', groupItemsLength);\n              const labelReplacedDataPreview = $(label).attr('data-preview').replace('0', groupItemsLength);\n\n              $(label).attr('for', labelReplacedFor);\n              $(label).attr('data-input', labelReplacedDataInput);\n              $(label).attr('data-preview', labelReplacedDataPreview);\n            }\n\n            clonedGroup.find('.hidden-file-inputs').html('');\n            clonedGroup.find('.__uploaded__files').html('');\n            clonedGroup.find('.__file__list__default').html('');\n          } else {\n            const currentInput = $(input);\n            const replacedName = currentInput.attr('name').replace('0', groupItemsLength);\n            const currentLabel = clonedGroup.find(`label[for=\"${currentInput.attr('id')}\"]`);\n\n            // input\n            currentInput.val('').attr('name', replacedName);\n            const newInputId = `${currentInput.attr('data-name')}_${new Date().getTime()}`;\n\n            // Add New I'd\n            if (currentLabel.length) {\n              currentLabel.attr('for', newInputId);\n            }\n            currentInput.attr('id', newInputId);\n          }\n\n          const replacedErrorName = errorSpan.attr('data-name').replace('0', groupItemsLength);\n\n          errorSpan.attr('data-name', replacedErrorName).removeClass('has-error').text('');\n          formGroup.removeClass('is-invalid');\n        });\n\n        if (clonedGroupInputLength > 1) {\n          clonedGroup.addClass('grouped');\n        }\n\n        clonedGroup.attr('data-index', groupItemsLength);\n        clonedGroup.append($this._getRemoveIcon());\n\n        parentGroupDiv.find('.multiple-group-content').append(clonedGroup);\n      }\n\n      if (parentGroupDiv.find('select.select2').length) {\n        select2Init(parentGroupDiv);\n      }\n    });\n  }\n\n  _deleteMultipleItem() {\n    const $this = this;\n    $(document).on('click', '.remove-multiple-item', function () {\n      const parentData = $(this).closest('.core-multiple-inputs');\n\n      $(this).closest('.group-item').remove();\n      $this._resetInputName(parentData);\n    });\n  }\n\n  _resetInputName(parentData) {\n    let i = 1;\n    parentData.find('.group-item:not(:first)').each((groupKey, groupItem) => {\n      $(groupItem).find(':input').each((k, input) => {\n        const dataNum = $(groupItem).attr('data-index');\n        const formGroup = $(input).closest('.form-group');\n        const errorSpan = formGroup.find('.validation-error');\n\n        if ($(input).attr('name')) {\n          const replacedName = $(input).attr('name').replace(dataNum, i);\n          const replacedErrorName = errorSpan.attr('data-name').replace(dataNum, i);\n\n          $(input).attr('name', replacedName);\n          errorSpan.attr('data-name', replacedErrorName);\n        }\n      });\n\n      $(groupItem).attr('data-index', i);\n\n      i++;\n    });\n  }\n\n  _getRemoveIcon() {\n    return '<i class=\"flaticon-circle remove-multiple-item\"></i>';\n  }\n\n  init() {\n    if ($(`.${this.coreParentClass}`).length) {\n      this._addMultipleItem();\n      this._deleteMultipleItem();\n    }\n  }\n}\n\nnew MultipleInputs().init();\n"],"names":["constructor","this","coreParentClass","_addMultipleItem","$this","$","click","parentGroupDiv","closest","find","length","select2","clonedGroup","clone","clonedGroupInputLength","groupItemsLength","each","not","k","input","formGroup","errorSpan","attr","fileId","replacedName","replace","val","replacedId","labels","remove","label","labelReplacedFor","labelReplacedDataInput","labelReplacedDataPreview","html","currentInput","currentLabel","newInputId","Date","getTime","replacedErrorName","removeClass","text","addClass","append","_getRemoveIcon","select2Init","_deleteMultipleItem","document","on","parentData","_resetInputName","i","groupKey","groupItem","dataNum","init"],"mappings":"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"}