{"version":3,"file":"DataTable-iXWZ9o46.js","sources":["../../../resources/js/core/DataTable.js"],"sourcesContent":["const SEARCH_LOCALSTORAGE_KEY = 'datatable_search_values';\nconst SEARCH_DATATABLE_STATE_KEY = 'datatable_search_state';\n\n// eslint-disable-next-line no-unused-vars\nexport class DataTable {\n  constructor(options = {}, tableId = '#__data__table') {\n    this.initVariables(options, tableId);\n    this.setSearchStoredData();\n    this.columnDefaultRender(options);\n    this.init();\n  }\n\n  initVariables(options, tableId) {\n    this.tableId = tableId;\n    this.tableEl = $(tableId);\n    this.options = options;\n    this.searchFormId = options.searchFormId ?? 'dataTable__search__form';\n    this.searchFormEl = $(`#${this.searchFormId}`);\n    this.searchData = {};\n    this.pathOptions = options.pathOptions;\n  }\n\n  columnDefaultRender(options) {\n    const showStatusRender = {\n      show_status: {\n        render(showStatus) {\n          return `<span class=\"show-status-${showStatus}\">${$trans(`__dashboard.select.option.show_status_${showStatus}`)}</span>`;\n        },\n      },\n    };\n\n    options.columnsRender = { ...showStatusRender, ...options.columnsRender };\n  }\n\n  storeSearchData() {\n    return this.options.storeSearchData ?? true;\n  }\n\n  actions() {\n    const replaceId = (id, type) => this.pathOptions[`${type}Path`].replace(':id', id);\n\n    const self = this;\n    const defaultActions = {\n      edit(row) {\n        return `<a href=\"${replaceId(row.id, 'edit')}\" class=\"btn\" title=\"Edit\">\n                    <i class=\"flaticon-edit\"></i>\n                </a>`;\n      },\n\n      show(row) {\n        return `<a href=\"${replaceId(row.id, 'show')}\" class=\"btn\" title=\"Show\">\n                   <i class=\"flaticon-eye\"></i>\n                </a>`;\n      },\n\n      clone(row) {\n        if (self.pathOptions.clonePath) {\n          return `<a href=\"${replaceId(row.id, 'clone')}\" class=\"btn\" title=\"Duplicate\">\n                   <i class=\"fas fa-copy fa-fw\"></i>\n                </a>`;\n        }\n\n        return '';\n      },\n\n      delete(row) {\n        if (typeof row.canDelete !== 'undefined' && !row.canDelete) {\n          return '';\n        }\n\n        return `<button type=\"button\" data-url=\"${replaceId(row.id, 'delete')}\" data-event-name=\"deleteDataTableRow\" class=\"btn __confirm__delete__btn\" title=\"Delete\">\n                    <i class=\"flaticon2-trash\"></i>\n                </button>`;\n      },\n    };\n\n    this.options.actions = { ...defaultActions, ...this.options.actions };\n  }\n\n  renderActions(data, type, row, meta) {\n    let actions = '';\n    // eslint-disable-next-line no-restricted-syntax\n    for (const [key, func] of Object.entries(this.options.actions)) {\n      if (typeof func !== 'boolean') actions += func(row);\n    }\n    return `<div class=\"text-center table-buttons\">${actions}</div>`;\n  }\n\n  columnRenderRelation(column) {\n    const columnName = column.data;\n    if (this.options.relations && this.options.relations[columnName]) {\n      const relationName = this.options.relations[columnName];\n      column.render = (data) => {\n        let text = '';\n\n        if (data && !Array.isArray(data)) {\n          // if relation is objected\n          if (typeof relationName !== 'string') {\n            const relationKey = Object.keys(relationName)[0] || '';\n\n            if (data[relationKey]) {\n              return data[relationKey][relationName[relationKey]];\n            }\n          }\n\n          return data[relationName] || '';\n        }\n\n        if (Array.isArray(data)) {\n          data.map((item, index) => {\n            if (typeof relationName !== 'string') {\n              const relationKey = Object.keys(relationName)[0] || '';\n              if (item[relationKey]) {\n                const relVal = item[relationKey][relationName[relationKey]];\n                text += index ? `, ${relVal}` : relVal;\n              }\n            } else {\n              text += index ? `, ${item[relationName]}` : item[relationName];\n            }\n          });\n\n          return text;\n        }\n\n        return '';\n      };\n    }\n    return column;\n  }\n\n  actionsColumn() {\n    return {\n      data: null,\n      orderable: false,\n      sortable: false,\n      render: this.renderActions.bind(this),\n    };\n  }\n\n  mapTableColumns(columns = []) {\n    const fields = this.tableEl.find('thead th');\n    // eslint-disable-next-line array-callback-return\n    fields.map((key, field) => {\n      const columnName = $(field).data('key');\n      let column = {\n        data: columnName,\n        name: columnName,\n        orderable: $(field).data('orderable') ?? true,\n      };\n\n      const { columnsRender } = this.options;\n\n      if (columnsRender && columnsRender[columnName]) {\n        column = { ...column, ...columnsRender[column.data] };\n      }\n\n      if (columnName) {\n        columns.push(this.columnRenderRelation(column));\n      }\n    });\n    return columns;\n  }\n\n  getAndGenerateColumns() {\n    const columns = this.mapTableColumns();\n    if (typeof this.options.noActions === 'undefined' || !this.options.noActions) {\n      columns.push(this.actionsColumn());\n    }\n    return columns;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  generateRequestData(data) {\n    let orderColumn = data.order[0];\n   /* if (this.options.order) {\n      orderColumn = {\n        column: this.options.order[0][0],\n        dir: this.options.order[0][1],\n      };\n    }*/\n\n    return {\n      'order[sort_by]': data.columns[orderColumn.column].name,\n      'order[sort_desc]': orderColumn.dir,\n      perPage: data.length,\n      start: data.start,\n      ...this.searchData,\n    };\n  }\n\n  async ajaxSend(data, callback) {\n    this.resetForm();\n    const searchInput = this.getDefaultSearchInputField();\n    if (searchInput.val() && searchInput.val().trim()) {\n      searchInput.prop('readOnly', true);\n    }\n\n    // eslint-disable-next-line no-undef\n    await axios(this.pathOptions.searchPath, { params: this.generateRequestData(data) })\n      .then((resp) => {\n        callback(resp.data);\n\n        if (this.options.beforeSendRequest) {\n          this.options.beforeSendRequest(resp.data);\n        }\n      }).catch((err) => {\n        console.log('err', err)\n        this.errorHandler(err);\n        callback({\n          data: [],\n          recordsFiltered: 0,\n        });\n      }).finally(() => {\n        searchInput.prop('readOnly', false);\n      });\n\n    this.searchFromLoading();\n  }\n\n  errorHandler(error) {\n    error = error.response.data;\n    if (error) {\n      const formEl = this.searchFormEl;\n\n      formEl.find('.validation-error').removeClass('has-error');\n      formEl.find('.form-group').removeClass('is-invalid');\n\n      for (const [key, value] of Object.entries(error.errors)) {\n        const nameKEy = key.substring(2);\n        let hasErrorSpan = formEl.find(`.validation-error[data-name=\"${nameKEy}\"]`);\n\n        if (!hasErrorSpan.length) {\n          hasErrorSpan = formEl.find(`.validation-error[data-name=\"${nameKEy}[]\"]`);\n        }\n\n        hasErrorSpan.closest('.form-group').addClass('is-invalid');\n        hasErrorSpan.html(value).addClass('has-error');\n      }\n    }\n  }\n\n  resetForm() {\n    this.searchFormEl.find('.validation-error').html('');\n    this.searchFormEl.find('.form-group').removeClass('is-invalid');\n  }\n\n  generateOptions() {\n    const moduleName = this.getCurrentModuleName();\n\n    const options = {\n      processing: true,\n      serverSide: true,\n      searching: true,\n      // searchDelay: 1000,\n      ajax: this.ajaxSend.bind(this),\n      order: [[0, 'desc']],\n      pageLength: 25,\n      columns: this.getAndGenerateColumns(),\n      bStateSave: true,\n      stateSaveCallback(oSettings, oData) {\n        const storeData = {};\n        if (oData.search) {\n          oData.search.search = '';\n        }\n\n        storeData[moduleName] = oData;\n\n        localStorage.setItem(SEARCH_DATATABLE_STATE_KEY, JSON.stringify(storeData));\n      },\n      language: {\n        search: '',\n        searchPlaceholder: $trans('__dashboard.datatable.search_input_placeholder'),\n      },\n    };\n\n    const savedDatatableState = JSON.parse(localStorage.getItem(SEARCH_DATATABLE_STATE_KEY));\n    if (savedDatatableState && savedDatatableState[moduleName]) {\n      options.stateLoadCallback = () => savedDatatableState[moduleName];\n    }\n\n    this.options = { ...options, ...this.options };\n  }\n\n  tableReload() {\n    this.table.ajax.reload();\n  }\n\n  eventListener() {\n    window.addEventListener('deleteDataTableRow', () => {\n      this.tableReload();\n    });\n  }\n\n  searchFromLoading(is) {\n    const searchFormBtn = this.searchFormEl.find('button.search__form__btn');\n    const searchFormResetBtn = this.searchFormEl.find('button.reset__form__btn');\n    const spinner = this.searchFormEl.find('.loading__form__icon');\n    if (is) {\n      spinner.addClass('d-inline-block ');\n      searchFormBtn.prop('disabled', true);\n      searchFormResetBtn.prop('disabled', true);\n    } else {\n      spinner.removeClass('d-inline-block');\n      searchFormBtn.prop('disabled', false);\n      searchFormResetBtn.prop('disabled', false);\n    }\n  }\n\n  searchFormReset() {\n    this.searchFormEl.find('.reset__form__btn').click(() => {\n      this.searchFromLoading(true);\n      this.searchData = {};\n      this.searchFormEl[0].reset();\n      this.table.search('');\n      this.clearSearchedDataFromLocalstorage();\n      this.searchFormEl.find('.select2').val(null).trigger('change');\n      this.tableReload();\n      this.getSearchCollapse().removeClass('has-default-values');\n    });\n  }\n\n  searchFormSubmit(event) {\n    event.preventDefault();\n    const el = event.target;\n    this.searchData = {};\n\n    this.searchFromLoading(true);\n    const searchData = $(el).serializeArray();\n\n    searchData.map((item, id) => {\n      let addArrayBrackets = '';\n      if ($(el).find(`select[name=\"${item.name}\"][multiple]`).length) {\n        addArrayBrackets = `[${id}]`;\n      }\n\n      this.searchData[`f[${item.name}]${addArrayBrackets}`] = item.value;\n    });\n\n    if (this.table.search().length) {\n      this.searchData['f[search]'] = this.table.search();\n    }\n\n    this.storeSearchedData();\n    this.tableReload();\n  }\n\n  storeSearchedData() {\n    if (this.storeSearchData()) {\n      const searchData = this.searchFormEl.serializeArray();\n      const searchDataValues = searchData.filter((item) => item.value !== '' || item.name === 'show_status');\n      const moduleName = this.getCurrentModuleName();\n\n      const storeData = {};\n     /* if (this.table.search()) {\n        searchDataValues.push({ name: 'search', value: this.table.search() });\n      }*/\n\n      storeData[moduleName] = searchDataValues;\n\n      localStorage.setItem(SEARCH_LOCALSTORAGE_KEY, JSON.stringify(storeData));\n\n      if (this.options.afterStoreSearchedData) {\n        this.options.afterStoreSearchedData(storeData);\n      }\n    }\n  }\n\n  setSearchStoredData() {\n    if (this.storeSearchData()) {\n      const localStoredData = JSON.parse(localStorage.getItem(SEARCH_LOCALSTORAGE_KEY));\n      const moduleName = this.getCurrentModuleName();\n\n      if (\n        localStoredData\n        && localStoredData[moduleName]\n        && localStoredData[moduleName].length\n      ) {\n        const self = this;\n        const storedData = localStoredData[moduleName];\n\n        // Collapse Show Part\n        let showCollapse = true;\n\n        if (storedData.length === 1 && $.inArray(storedData[0].name, ['search', 'show_status']) !== -1) {\n          showCollapse = false;\n        }\n\n        if (storedData.length === 2 && storedData[0].name === 'show_status' && storedData[1].name === 'search') {\n          showCollapse = false;\n        }\n\n        if (showCollapse) {\n          this.showSearchCollapse();\n        }\n\n        const storedDataModified = storedData.reduce((prev, current) => {\n          if (typeof prev[current.name] === 'undefined') {\n            prev[current.name] = current.value;\n          } else if (Array.isArray(prev[current.name])) {\n            prev[current.name].push(current.value);\n          } else {\n            prev[current.name] = [prev[current.name], current.value];\n          }\n          return prev;\n        }, {});\n\n        $.each(storedDataModified, (key, value) => {\n          const searchInput = self.searchFormEl.find(`:input[name='${key}']`);\n\n       /*   // Checkbox\n          if (searchInput.is(':checkbox')) {\n            searchInput.prop('checked', true);\n          }\n\n          // Date\n          if (searchInput.hasClass('backend-date-value')) {\n            const closestDiv = searchInput.closest('div');\n            if (closestDiv.find('.datepicker').length) {\n              closestDiv.find('.datepicker')\n                .val(moment(value, $dashboardDates.js.date_format)\n                  .format($dashboardDates.js.date_format_front));\n            }\n\n            if (closestDiv.find('.datetimepicker').length) {\n              closestDiv.find('.datetimepicker')\n                .val(moment(value, $dashboardDates.js.date_time_format)\n                  .format($dashboardDates.js.date_time_format_front));\n            }\n          }\n*/\n          //\n          let addArrayBrackets = '';\n          if (!Array.isArray(value) && searchInput.attr('multiple')) {\n            addArrayBrackets = '[]';\n          }\n\n          // Search Input of Datatable\n          /*if (key === 'search') {\n            setTimeout(function () {\n              $('.dataTables_filter').find('input').val(value);\n            }, 200);\n          }*/\n\n          //\n          // searchInput.val(value);\n          // self.searchData[`f[${key}]${addArrayBrackets}`] = value;\n        });\n\n        if (this.options.afterSetSearchStoredData) {\n          this.options.afterSetSearchStoredData(storedData);\n        }\n      }\n    }\n  }\n\n  getSearchCollapse() {\n    return this.searchFormEl.closest('.datatable-search-collapse')\n      .find('.collapse');\n  }\n\n  showSearchCollapse() {\n    this.getSearchCollapse()\n      .addClass('has-default-values show');\n  }\n\n  getCurrentModuleName() {\n    return location.pathname.split('/')[3];\n  }\n\n  clearSearchedDataFromLocalstorage() {\n    localStorage.removeItem(SEARCH_LOCALSTORAGE_KEY);\n    localStorage.removeItem(SEARCH_DATATABLE_STATE_KEY);\n  }\n\n  defaultSearchData() {\n    const self = this;\n    $.each(this.searchFormEl.find('.default-search'), (k, item) => {\n      self.searchData[`f[${$(item).attr('name')}]`] = $(item).val();\n    });\n  }\n\n  createDataTable() {\n    this.table = this.tableEl.DataTable(this.options);\n  }\n\n  defaultSearchInput() {\n    const self = this;\n    let timer;\n\n    this.getDefaultSearchInputField()\n      .unbind()\n      .bind('keyup input', function () {\n        clearTimeout(timer);\n        timer = setTimeout(() => {\n          self.searchData['f[search]'] = $(this).val();\n          self.table.search($(this).val());\n\n          self.tableReload();\n          self.storeSearchedData();\n        }, 330);\n      });\n  }\n\n  getDefaultSearchInputField() {\n    return $(`#${this.tableId.substring(1)}_filter`).find('input');\n  }\n\n  $_functions() {\n    this.createDataTable();\n    this.searchFormEl.submit(this.searchFormSubmit.bind(this));\n  }\n\n  init() {\n    this.actions();\n    this.defaultSearchData();\n    this.generateOptions();\n    this.eventListener();\n    this.$_functions();\n    this.searchFormReset();\n    this.defaultSearchInput();\n  }\n}\n"],"names":["__vite_legacy_guard","SEARCH_LOCALSTORAGE_KEY","SEARCH_DATATABLE_STATE_KEY","DataTable","options","tableId","_a","showStatusRender","showStatus","replaceId","id","type","self","defaultActions","row","data","meta","actions","key","func","column","columnName","relationName","text","relationKey","item","index","relVal","columns","field","columnsRender","orderColumn","callback","searchInput","resp","err","error","formEl","value","nameKEy","hasErrorSpan","moduleName","oSettings","oData","storeData","savedDatatableState","is","searchFormBtn","searchFormResetBtn","spinner","event","el","addArrayBrackets","searchDataValues","localStoredData","storedData","showCollapse","storedDataModified","prev","current","k","timer"],"mappings":"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"}