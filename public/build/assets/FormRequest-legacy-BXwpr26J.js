System.register([],(function(t,s){"use strict";return{execute:function(){t("F",class{constructor(t,s="__form__request"){this.options=t,this.formId=s,this.formEl=$(`#${s}`),this.cardBody=this.formEl.find(".card-body"),this.init()}async formSubmit(t){t.preventDefault();const s=t.target,o=$(s).attr("method"),r=$(s).attr("action"),e=new FormData(s);await this.sendData(o,r,e)}async sendData(t,s,o){this.formEl.find(".validation-error").html(""),this.formRequestLoader(),this.__checkOptionMethodsExist()&&this.options.methods.beforeSendRequest&&this.options.methods.beforeSendRequest(),this.formLoad(),await axios.post(s,o).then(this.successHandler.bind(this)).catch(this.errorHandler.bind(this))}successHandler(t){if(t=t.data,this.__checkOptionMethodsExist()&&this.options.methods.afterSuccess)return this.formLoad(!1),this.formRequestLoader(!1),this.options.methods.afterSuccess(t);t.redirectUrl?(localStorage.setItem("_message",t.message),location.href=t.redirectUrl):(this.formRequestLoader(!1),this.formLoad(!1))}errorHandler(t){if(t.response&&t.response.data.errors){t=t.response.data,this.formEl.find(".validation-error").removeClass("has-error"),$(".form-group").removeClass("is-invalid");for(const[s,o]of Object.entries(t.errors)){let t=this.formEl.find(`.validation-error[data-name="${s}"]`);t.length||(t=this.formEl.find(`.validation-error[data-name="${s}[]"]`)),t.closest(".form-group").addClass("is-invalid"),t.html(o).addClass("has-error")}this.scrollToFirstError(),this.__checkOptionMethodsExist()&&this.options.methods.afterError&&this.options.methods.afterError(t)}this.formRequestLoader(!1),this.formLoad(!1)}scrollToFirstError(){const t=this.formEl.find(".validation-error.has-error").first();t.closest(".tab-pane")&&$(`.nav-tabs a[href="#${t.closest(".tab-pane").attr("id")}"]`).tab("show"),t.length&&setTimeout((()=>{$("html, body").animate({scrollTop:t.offset().top-300},200)}),150)}formRequestLoader(t=!0){const s=this.formEl.find("button.form__request__send__btn .spinner-border"),o=this.formEl.find("button.form__request__send__btn");t?(s.css({display:"inline-block"}),o.prop("disabled",!0)):(s.hide(),o.prop("disabled",!1))}formLoad(t=!0){t?this.cardBody.addClass("loading-content"):this.cardBody.removeClass("loading-content")}showMode(){this.formEl.find(":input").prop("disabled",!0)}clickSubmit(){this.formEl.submit(this.formSubmit.bind(this))}init(){this.formEl.hasClass("show-mode")&&this.showMode(),this.clickSubmit(),this.formRequestLoader(!1),this.formLoad(!1)}__checkOptionMethodsExist(){return void 0!==this.options&&void 0!==this.options.methods}})}}}));
//# sourceMappingURL=FormRequest-legacy-BXwpr26J.js.map
